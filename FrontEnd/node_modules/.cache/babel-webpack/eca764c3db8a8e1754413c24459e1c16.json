{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/katie/group2p2/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../services/auth.service\";\nexport class LoginComponent {\n  constructor(formBuilder, http, router, authService) {\n    this.formBuilder = formBuilder;\n    this.http = http;\n    this.router = router;\n    this.authService = authService;\n    this.userEndpoint = \"http://localhost:8090/anilib/user/\";\n    this.loginEndpoint = \"http://localhost:8090/anilib/login\";\n  }\n\n  ngOnInit() {\n    this.loginForm = this.formBuilder.group({\n      username: [''],\n      password: ['']\n    });\n    this.authService.logout();\n  }\n\n  login() {\n    var _this = this;\n\n    this.http.post(this.loginEndpoint, this.loginForm.getRawValue()).subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (res) {\n        _this.authService.setToken(res.token).then(() => {\n          _this.http.get(_this.userEndpoint + _this.loginForm.get('username').value).subscribe(res => {\n            localStorage.setItem('user', JSON.stringify(res));\n\n            _this.loginForm.reset();\n\n            _this.router.navigate([`/library`]);\n          });\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthService));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 16,\n  vars: 1,\n  consts: [[1, \"center\"], [1, \"form\"], [1, \"p-1\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"username\"], [\"formControlName\", \"username\", \"id\", \"username\", \"type\", \"text\", \"placeholder\", \"Username\", 1, \"form-control\"], [1, \"form-group\"], [\"for\", \"password\"], [\"formControlName\", \"password\", \"type\", \"text\", \"placeholder\", \"Password\", \"id\", \"password\", 1, \"form-control\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵelementStart(5, \"div\");\n      i0.ɵɵelementStart(6, \"label\", 3);\n      i0.ɵɵtext(7, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 5);\n      i0.ɵɵelementStart(10, \"label\", 6);\n      i0.ɵɵtext(11, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelementStart(14, \"button\", 9);\n      i0.ɵɵtext(15, \"Submit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n    }\n  },\n  directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName],\n  styles: [\".center[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    height:100vh;\\r\\n    \\r\\n}\\r\\n\\r\\n.form[_ngcontent-%COMP%]{\\r\\n    padding-inline: 100px;\\r\\n    padding-top: 15px;\\r\\n    width:500px\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixZQUFZOztBQUVoQjs7QUFFQTtJQUNJLHFCQUFxQjtJQUNyQixpQkFBaUI7SUFDakI7QUFDSiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNlbnRlcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBoZWlnaHQ6MTAwdmg7XHJcbiAgICBcclxufVxyXG5cclxuLmZvcm17XHJcbiAgICBwYWRkaW5nLWlubGluZTogMTAwcHg7XHJcbiAgICBwYWRkaW5nLXRvcDogMTVweDtcclxuICAgIHdpZHRoOjUwMHB4XHJcbn1cclxuXHJcbiJdfQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/katie/group2p2/FrontEnd/src/app/core/auth/components/login/login.component.ts"],"names":["i0","i1","i2","i3","i4","LoginComponent","constructor","formBuilder","http","router","authService","userEndpoint","loginEndpoint","ngOnInit","loginForm","group","username","password","logout","login","post","getRawValue","subscribe","res","setToken","token","then","get","value","localStorage","setItem","JSON","stringify","reset","navigate","ɵfac","LoginComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","HttpClient","Router","AuthService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginComponent_Template_form_ngSubmit_4_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"@angular/common/http\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"../../services/auth.service\";\r\nexport class LoginComponent {\r\n    constructor(formBuilder, http, router, authService) {\r\n        this.formBuilder = formBuilder;\r\n        this.http = http;\r\n        this.router = router;\r\n        this.authService = authService;\r\n        this.userEndpoint = \"http://localhost:8090/anilib/user/\";\r\n        this.loginEndpoint = \"http://localhost:8090/anilib/login\";\r\n    }\r\n    ngOnInit() {\r\n        this.loginForm = this.formBuilder.group({\r\n            username: [''],\r\n            password: ['']\r\n        });\r\n        this.authService.logout();\r\n    }\r\n    login() {\r\n        this.http.post(this.loginEndpoint, this.loginForm.getRawValue())\r\n            .subscribe(async (res) => {\r\n            this.authService.setToken(res.token).then(() => {\r\n                this.http.get(this.userEndpoint + this.loginForm.get('username').value).subscribe((res) => {\r\n                    localStorage.setItem('user', JSON.stringify(res));\r\n                    this.loginForm.reset();\r\n                    this.router.navigate([`/library`]);\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\nLoginComponent.ɵfac = function LoginComponent_Factory(t) { return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthService)); };\r\nLoginComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LoginComponent, selectors: [[\"app-login\"]], decls: 16, vars: 1, consts: [[1, \"center\"], [1, \"form\"], [1, \"p-1\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"username\"], [\"formControlName\", \"username\", \"id\", \"username\", \"type\", \"text\", \"placeholder\", \"Username\", 1, \"form-control\"], [1, \"form-group\"], [\"for\", \"password\"], [\"formControlName\", \"password\", \"type\", \"text\", \"placeholder\", \"Password\", \"id\", \"password\", 1, \"form-control\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\"]], template: function LoginComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"h2\");\r\n        i0.ɵɵtext(3, \"Login\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(4, \"form\", 2);\r\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() { return ctx.login(); });\r\n        i0.ɵɵelementStart(5, \"div\");\r\n        i0.ɵɵelementStart(6, \"label\", 3);\r\n        i0.ɵɵtext(7, \"Username\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(8, \"input\", 4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(9, \"div\", 5);\r\n        i0.ɵɵelementStart(10, \"label\", 6);\r\n        i0.ɵɵtext(11, \"Password\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(12, \"input\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"div\", 8);\r\n        i0.ɵɵelementStart(14, \"button\", 9);\r\n        i0.ɵɵtext(15, \"Submit\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\r\n    } }, directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName], styles: [\".center[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    height:100vh;\\r\\n    \\r\\n}\\r\\n\\r\\n.form[_ngcontent-%COMP%]{\\r\\n    padding-inline: 100px;\\r\\n    padding-top: 15px;\\r\\n    width:500px\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixZQUFZOztBQUVoQjs7QUFFQTtJQUNJLHFCQUFxQjtJQUNyQixpQkFBaUI7SUFDakI7QUFDSiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNlbnRlcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBoZWlnaHQ6MTAwdmg7XHJcbiAgICBcclxufVxyXG5cclxuLmZvcm17XHJcbiAgICBwYWRkaW5nLWlubGluZTogMTAwcHg7XHJcbiAgICBwYWRkaW5nLXRvcDogMTVweDtcclxuICAgIHdpZHRoOjUwMHB4XHJcbn1cclxuXHJcbiJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}