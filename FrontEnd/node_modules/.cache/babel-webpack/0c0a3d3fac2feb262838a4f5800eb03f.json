{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:/Users/18048/Documents/Revature/Projects/Project 2/group2p2/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator\").default;\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // Imports\n\nconst ow_1 = __importDefault(require(\"ow\"));\n\nconst url_1 = require(\"url\"); // Utils\n\n\nconst utils_1 = require(\"./utils\");\n/**\n * Search method\n *\n * @param query - The query you want to search\n * @param type - Specify where to search\n * @param page - The page number of the results\n * @param filters - The list of filters to add\n */\n\n\nconst search = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (query, type, page = 1, filters) {\n    ow_1.default(page, ow_1.default.number.positive);\n    ow_1.default(query, ow_1.default.string.minLength(3));\n    const url = new url_1.URL(`/search/${type}?q=${query}&page=${page}`, utils_1.baseUrl);\n\n    if (filters) {\n      if (filters.end_date) {\n        // eslint-disable-next-line no-param-reassign\n        filters.end_date = new Date(filters.end_date).toISOString();\n      }\n\n      if (filters.genre) {\n        ow_1.default(filters.genre, ow_1.default.number.lessThanOrEqual(44));\n        ow_1.default(filters.genre, ow_1.default.number.greaterThanOrEqual(1));\n      }\n\n      if (filters.limit) {\n        ow_1.default(filters.limit, ow_1.default.number.positive);\n      }\n\n      if (filters.score) {\n        ow_1.default(filters.score, ow_1.default.number.positive);\n      }\n\n      if (filters.start_date) {\n        // eslint-disable-next-line no-param-reassign\n        filters.start_date = new Date(filters.start_date).toISOString();\n      }\n\n      Object.entries(filters).forEach(([key, value]) => {\n        url.searchParams.append(key, value);\n      });\n    }\n\n    const {\n      body\n    } = yield utils_1.queue.add( /*#__PURE__*/_asyncToGenerator(function* () {\n      return utils_1.searchApi(url.href, {});\n    }));\n    return body;\n  });\n\n  return function search(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.default = {\n  search\n};","map":{"version":3,"sources":["C:/Users/18048/Documents/Revature/Projects/Project 2/group2p2/frontend/node_modules/jikan-client/dist/search.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","ow_1","require","url_1","utils_1","search","query","type","page","filters","default","number","positive","string","minLength","url","URL","baseUrl","end_date","Date","toISOString","genre","lessThanOrEqual","greaterThanOrEqual","limit","score","start_date","entries","forEach","key","searchParams","append","body","queue","add","searchApi","href"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Imports\nconst ow_1 = __importDefault(require(\"ow\"));\nconst url_1 = require(\"url\");\n// Utils\nconst utils_1 = require(\"./utils\");\n/**\n * Search method\n *\n * @param query - The query you want to search\n * @param type - Specify where to search\n * @param page - The page number of the results\n * @param filters - The list of filters to add\n */\nconst search = async (query, type, page = 1, filters) => {\n    ow_1.default(page, ow_1.default.number.positive);\n    ow_1.default(query, ow_1.default.string.minLength(3));\n    const url = new url_1.URL(`/search/${type}?q=${query}&page=${page}`, utils_1.baseUrl);\n    if (filters) {\n        if (filters.end_date) {\n            // eslint-disable-next-line no-param-reassign\n            filters.end_date = new Date(filters.end_date).toISOString();\n        }\n        if (filters.genre) {\n            ow_1.default(filters.genre, ow_1.default.number.lessThanOrEqual(44));\n            ow_1.default(filters.genre, ow_1.default.number.greaterThanOrEqual(1));\n        }\n        if (filters.limit) {\n            ow_1.default(filters.limit, ow_1.default.number.positive);\n        }\n        if (filters.score) {\n            ow_1.default(filters.score, ow_1.default.number.positive);\n        }\n        if (filters.start_date) {\n            // eslint-disable-next-line no-param-reassign\n            filters.start_date = new Date(filters.start_date).toISOString();\n        }\n        Object.entries(filters).forEach(([key, value]) => {\n            url.searchParams.append(key, value);\n        });\n    }\n    const { body } = await utils_1.queue.add(async () => utils_1.searchApi(url.href, {}));\n    return body;\n};\nexports.default = {\n    search\n};\n"]},"metadata":{},"sourceType":"script"}